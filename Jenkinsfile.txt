pipeline {
    agent any

    stages {
        stage('Clone Repo') {
            steps {
                // Jenkins will automatically clone the repo
                echo 'ðŸ”„ Cloning repo...'
            }
        }

        stage('Run Tests') {
            steps {
                echo 'ðŸš€ Running test.py...'
                sh 'pytest test.py --html=report.html'
            }
        }

        stage('Check & Send Report') {
            steps {
                echo 'ðŸ“¬ Running report-check.py...'
                sh 'python3 report-check.py'
            }
        }
    }

    post {
        always {
            echo 'ðŸ“¦ Archiving report...'
            archiveArtifacts artifacts: 'report.html', onlyIfSuccessful: false
        }
    }
}
